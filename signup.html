<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup - Your Company Name</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
       
        <h1 class="title">VerveIN</h1>
        <form action="" method="post" id="Mainform">
            <div class="form-group">
                <input type="text" class="form-control" name="fullname" placeholder="Full Name">
            </div>
            <div class="form-group">
                <input type="email" id="email" class="form-control" name="email" placeholder="Email">
            </div>
            <div class="form-group">
                <input type="password" id="password" class="form-control" name="password" placeholder="Password">
            </div>
            <div class="form-group">
                <input type="password" id="repeat_password" class="form-control" name="repeat_password" placeholder="Repeat Password">
            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-primary" value="Register" name="submit">
            </div>
        </form>
        <div>
            <p>Already Registered? <a href="login.html">Login Here</a></p>
        </div>
    </div>
</body>
</html>


    <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";




        const firebaseConfig = {
            apiKey: "AIzaSyAttOBNym78OvLC-sB0QTSnzER5B13YgTg",
            authDomain: "verve-1883f.firebaseapp.com",
            databaseURL: "https://verve-1883f-default-rtdb.firebaseio.com",
            projectId: "verve-1883f",
            storageBucket: "verve-1883f.appspot.com",
            messagingSenderId: "88628857972",
            appId: "1:88628857972:web:8319d4700a9aa0ec9f5521"
        };


        const app = initializeApp(firebaseConfig);
        const db = getFirestore();
        const auth = getAuth(app);


        let email = document.getElementById('email');
        let password = document.getElementById('password');
        let repeat_password = document.getElementById('repeat_password');
        let Mainform = document.getElementById('Mainform');


        let RegisterUser = evt => {
    evt.preventDefault();

    createUserWithEmailAndPassword(auth, email.value, password.value)
        .then(async (credentials) => {
            var ref = doc(db, "UserAuthList", credentials.user.uid);
            await setDoc(ref, { 
                email: email.value,
                // Add additional user info as needed
                fullname: fullname.value,
                // Add more fields as needed
            });
            
            // Store user credentials in local storage
            localStorage.setItem("user-creds", JSON.stringify(credentials));

            // Store additional user info in local storage
            const userInfo = {
                email: email.value,
                fullname: fullname.value,
                
                // Add more fields as needed
            };
            localStorage.setItem("user-info", JSON.stringify(userInfo));

            alert('Account created successfully! Redirecting to the Main page.');
            window.location.replace("index.html");

        })
        .catch((error) => {
            alert(error.message);
            console.log(error.code);
            console.log(error.message);
        });
};

        Mainform.addEventListener('submit', RegisterUser);
        
    </script>



</body>
</html>
